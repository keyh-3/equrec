<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=2.0, user-scalable=yes">

<title>360 Viewer (Mouse Only)</title>

<!-- Three.js r145 -->
<script src="https://unpkg.com/three@0.145.0/build/three.min.js"></script>
<script src="https://unpkg.com/three@0.145.0/examples/js/controls/OrbitControls.js"></script>
      <script src="https://unpkg.com/three@0.145.0/examples/js/loaders/GLTFLoader.js"></script>
      
<style>
html, body {
  margin: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

#can {
  width: 100vw;
  height: 100vh;
  display: block;
}
</style>
</head>

<body>

<canvas id="can"></canvas>

<script>
let scene, camera, renderer, controls;

function main() {

  scene = new THREE.Scene();

  const canvas = document.getElementById("can");
const w = window.innerWidth;
const h = window.innerHeight;

  // カメラ
  camera = new THREE.PerspectiveCamera(100, w / h, 0.1, 10000);
  camera.position.set(0, 0, 0.001);
  scene.add(camera);

  // レンダラー
  renderer = new THREE.WebGLRenderer({
    canvas: canvas,
    antialias: true
  });
  renderer.setSize(w, h);
  renderer.setPixelRatio(window.devicePixelRatio);

     


scene.add(new THREE.AmbientLight(0xffffff, 0.5));
  // 360°テクスチャ
  const texture = new THREE.TextureLoader().load("equirectangular_image.jpg");
  const sphereGeo = new THREE.SphereGeometry(1, 32, 24);
  const sphereMat = new THREE.MeshBasicMaterial({
    map: texture,
    side: THREE.BackSide
  });

  const sphere = new THREE.Mesh(sphereGeo, sphereMat);
  scene.add(sphere);
const gltfLoader = new THREE.GLTFLoader();

gltfLoader.load(
  "無題.glb",   // ← あなたのGLBファイル名
  (gltf) => {
    const model = gltf.scene;

    // 球の内側・カメラの少し前に配置
    model.position.set(0, 0, 5);

    // 必要なら向きを調整
    model.rotation.y = Math.PI;

    scene.add(model);
  },
  (xhr) => {
    console.log((xhr.loaded / xhr.total * 100).toFixed(1) + "% loaded");
  },
  (error) => {
    console.error("GLB load error", error);
  }
);
      const ambient = new THREE.AmbientLight(0xffffff, 0.6);
scene.add(ambient);

const dirLight = new THREE.DirectionalLight(0xffffff, 0.8);
dirLight.position.set(1, 1, 1);
scene.add(dirLight);
  // OrbitControls（マウス操作）
  controls = new THREE.OrbitControls(camera, renderer.domElement);
  controls.target.set(0, 0, 0);
  controls.enablePan = false;
  controls.enableZoom = false;
  controls.rotateSpeed = 0.4;
  controls.update();

  animate();
}

function animate() {
  requestAnimationFrame(animate);
  renderer.render(scene, camera);
}

window.addEventListener("DOMContentLoaded", main);
</script>

</body>
</html>













